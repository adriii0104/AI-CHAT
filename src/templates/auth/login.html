{% extends './plantillas/base.html' %}

{% block title %} Login {% endblock %}

{% block body %}

{% block a %}
<a class="loguer" href="{{ url_for('register') }}" {% if request.path == url_for('register') %}class="active"{% endif %}>Register</a>
{% endblock %}        

<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/auth_login.css') }}">
  <link href="https://fonts.cdnfonts.com/css/sf-pro-display" rel="stylesheet">
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-brands/css/uicons-brands.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-bold-rounded/css/uicons-bold-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css'>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<style>
      .active {
        color: #2f81f7 !important;
}
</style>



<div class="spinner">
  <div class="spinner-circle"></div>
</div>

<div class="content">
  <div class="log-in-card">
    <div class="close">
      <a href="{{ url_for('home') }}">
        <i class="fi fi-bs-power"></i>
      </a>
    </div>

    <p>Log in your account </p>
    <div id="altern-log">
      <p>Sign in with</p>
      <i class="fi fi-brands-apple"></i>
      <i class="fi fi-brands-google"></i>
      <i class="fi fi-brands-facebook"></i>
      <i class="fi fi-brands-github"></i>
      <i class="fi fi-brands-microsoft"></i>
    </div><br><br>

    <div id="text-indication">
      <p class="log">Or log with Mail</p>
      <ul class="flash-messages" style="list-style: none;">
      {% with messages = get_flashed_messages() %}
  {% if messages %}

      {% for message in messages %}
        <li style="position: absolute; width: 100%; font-size: 0.85em; font-family:'Poppins', sans-serif !important; margin-top: -8px;">{{ message }}</li>
        <li style="position: absolute; width: 100%; font-size: 0.85em; font-family:'Poppins', sans-serif !important; margin-top: -8px;">{{ message }}</li>

      {% endfor %}

  {% endif %}

{% endwith %}
{% if errorL %}
<li style="position: absolute; width: 100%; font-size: 0.85em; font-family:'Poppins', sans-serif !important; margin-top: -8px;">{{ errorL }}</li>
{% endif %}
<li style="position: absolute; width: 100%; font-size: 0.85em; font-family:'Poppins', sans-serif !important; margin-top: -8px;" id="error"></li>


</ul>
    </div><br>

    <form method="post">
      <div class="user-box">
        <input type="text" id="email" oninput="validate()" list="emailOptions" name="email" autocomplete="off" required>
        <label for="email">Email</label>
      </div><br>
      
      <div class="user-box">
        <input type="password" id="password" name="contraseña" autocomplete="new-password" oninput="validate()" required>
        <label for="password">Password</label>
      </div>
      <br>
      <div class="user-box" style="margin-top: -20px;">
        <label style="margin-left: 15px; font-size: 0.75em;" for="checkbox">Show password</label>
        <input type="checkbox" id="checkbox" onclick="check()" style="width: 15px;">
      </div>

      {% if error %}
      <script>
        window.onload = function (){
          document.getElementById("email").focus();
          var error = '{{ error}}'
          if (error) {
                  document.getElementById("email").style.border = "1px solid red";
                  document.getElementById("password").style.border = "1px solid red";
                  document.getElementById("error").innerHTML = "Email or password not found";
        }}
      </script>
      {% endif %}
      <a href="{{ url_for ('register') }}">
      <p class="redirect">¿Don't have an account?</p>
      </a>
      <p style="font-size: 12px;">
        Al iniciar sesión, estás aceptando las condiciones de uso del chat bot.
      </p><br>


      <button class="i-button-register" id="button" disabled="true">Log In</button><br><br><br><br><br>
    </form>
  </div>
</div>

<script src="{{ url_for('static', filename='JS/login.js') }}"></script>
</body>
{% endblock %}
